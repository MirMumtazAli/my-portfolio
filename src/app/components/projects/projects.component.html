<app-section-wrapper title="Projects" sectionId="projects">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    @for (project of projects; track project.title; let i = $index) {
      <div 
        class="group flex flex-col bg-white dark:bg-gray-900/75 backdrop-blur-sm rounded-lg shadow-md dark:shadow-[inset_0_1px_0_0_rgba(255,255,255,0.1)] overflow-hidden transition-all duration-300 ease-out hover:shadow-xl dark:hover:shadow-gray-800/40 hover:-translate-y-1 hover:scale-[1.02] opacity-0 translate-y-4 transform motion-reduce:transition-none motion-reduce:opacity-100 motion-reduce:transform-none border border-gray-300 dark:border-transparent hover:border-sky-500 dark:hover:border-gray-700"
        appAnimateOnScroll
        [style.transition-delay]="(i % 2 * 150) + 'ms'">
        @if (project.imageUrls && project.imageUrls.length > 0) {
          <div class="relative">
            <img [src]="project.imageUrls[getImageIndex(project.title)]" [alt]="project.title" width="400" height="225" class="w-full h-48 object-cover">
            @if (project.imageUrls.length > 1) {
              <div class="absolute inset-0 flex items-center justify-between opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                <button (click)="changeImage(project.title, -1, project.imageUrls.length)" [attr.aria-label]="'View previous image for ' + project.title" class="bg-black/50 text-white p-2 rounded-full hover:bg-black/75 focus:outline-none focus:ring-2 focus:ring-gray-400 ml-2">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" /></svg>
                </button>
                <button (click)="changeImage(project.title, 1, project.imageUrls.length)" [attr.aria-label]="'View next image for ' + project.title" class="bg-black/50 text-white p-2 rounded-full hover:bg-black/75 focus:outline-none focus:ring-2 focus:ring-gray-400 mr-2">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" /></svg>
                </button>
              </div>
            }
          </div>
        }
        <div class="p-6 flex flex-col flex-grow">
          <h3 class="text-lg font-bold text-gray-800 dark:text-gray-200 group-hover:text-sky-600 dark:group-hover:text-white transition-colors duration-300 mb-2">
            {{ project.title }}
          </h3>

          <div class="text-gray-600 dark:text-gray-400 text-sm mb-4 flex-grow">
            <p>{{ project.description[0] }}</p>
             @if (expandedProjects().has(project.title)) {
              <ul class="list-disc pl-5 mt-2 space-y-1">
                @for (point of project.description.slice(1); track point) {
                  <li>{{ point }}</li>
                }
              </ul>
            }
            @if (project.description.length > 1) {
              <button (click)="toggleDescription(project.title)" class="font-semibold mt-3 text-xs py-1.5 px-3 rounded-full bg-gray-100 dark:bg-gray-800/50 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700/50 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-gray-900/75 focus:ring-sky-500" [attr.aria-label]="(expandedProjects().has(project.title) ? 'Show less' : 'Show more') + ' details for ' + project.title">
                {{ expandedProjects().has(project.title) ? 'Show Less' : 'Show More' }}
              </button>
            }
          </div>
          
          <div class="flex flex-wrap items-center gap-x-3 gap-y-1 mb-4 text-xs font-medium text-gray-500 dark:text-gray-400" aria-label="Technologies used">
            @for (tech of project.technologies; track tech; let isLast = $last) {
              <span>{{ tech }}</span>
              @if (!isLast) {
                <span class="text-gray-400 dark:text-gray-600" aria-hidden="true">&middot;</span>
              }
            }
          </div>

          <div class="mt-auto flex items-center gap-4 text-sm">
            @if (project.liveDemoUrl && project.liveDemoUrl !== '#') {
              <a [href]="project.liveDemoUrl" target="_blank" class="bg-sky-600 text-white font-semibold py-2 px-4 rounded-md hover:bg-sky-500 transition-colors duration-300 flex items-center gap-1.5" [attr.aria-label]="'View live demo of ' + project.title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4.25 5.5a.75.75 0 00-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0112.75 17h-8.5A2.25 2.25 0 012 14.75v-8.5A2.25 2.25 0 014.25 4h5a.75.75 0 010 1.5h-5z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M6.194 12.753a.75.75 0 001.06.053L16.5 4.44v2.81a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.553l-9.056 8.19a.75.75 0 00-.053 1.06z" clip-rule="evenodd"></path></svg>
                <span>Live Demo</span>
              </a>
            }
            @if (project.sourceCodeUrl && project.sourceCodeUrl !== '#') {
              <a [href]="project.sourceCodeUrl" target="_blank" class="flex items-center gap-1.5 font-medium text-gray-600 dark:text-gray-300 hover:text-sky-500 dark:hover:text-white transition-colors duration-300" [attr.aria-label]="'View project on GitHub for ' + project.title">
                 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="h-4 w-4"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8Z"></path></svg>
                <span>View on GitHub</span>
              </a>
            }
          </div>
        </div>
      </div>
    }
  </div>
</app-section-wrapper>